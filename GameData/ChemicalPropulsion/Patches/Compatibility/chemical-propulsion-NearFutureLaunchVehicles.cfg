@PART[nflv-engine-ar1-1,nflv-engine-ar1c-1,nflv-engine-rs84-1,nflv-engine-stbe-kero-1,nflv-engine-tr107-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[ModuleEngines*]
	{
		chemTechFuel = Kerosene
		chemTechOxidizer = LqdOxygen
	}
}

@PART[nflv-engine-m1d-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[ModuleEngines*]
	{
		chemTechFuel = Kerosene
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 310
			key = 1 280
			key = 12 0.001
		}
	}
}
@PART[nflv-engine-m1d-vac-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[ModuleEngines*]
	{
		chemTechFuel = Kerosene
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 350
			key = 1 230
			key = 12 0.001
		}
	}
}
@PART[nflv-engine-rutherford-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[ModuleEngines*]
	{
		chemTechFuel = Kerosene
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 310
			key = 1 270
			key = 12 0.001
		}
	}
}
@PART[nflv-engine-rutherford-vac-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[ModuleEngines*]
	{
		chemTechFuel = Kerosene
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 340
			key = 1 220
			key = 12 0.001
		}
	}
}

@PART[nflv-engine-rd701-1]:HAS[!MODULE[MultiModeEngine]]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = RD701
		secondaryEngineID = RD701LH2
	}
}
@PART[nflv-engine-rd701-1]:HAS[!MODULE[ModuleEngines]:HAS[#engineID[RD701LH2]]]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	+MODULE[ModuleEngines*]
	{
		%engineID = RD701LH2
	}
}
@PART[nflv-engine-rd701-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[MultiModeEngine]
	{
		%primaryEngineModeDisplayName = #LOC_ChemicalPropulsion_propellant_Kerosene_LqdHydrogen_LqdOxygen_title
		%secondaryEngineModeDisplayName = #LOC_ChemicalPropulsion_propellant_LqdHydrogen_LqdOxygen_title
	}
	@MODULE[ModuleEngines*]:HAS[#engineID[RD701]]
	{
		chemTechFuel = LqdHydrogen
		chemTechAdditive = Kerosene
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 460
			key = 1 220
			key = 12 0.001
		}
	}
	@MODULE[ModuleEngines*]:HAS[#engineID[RD701LH2]]
	{
		%engineID = RD701LH2
		chemTechFuel = LqdHydrogen
		chemTechOxidizer = LqdOxygen
		@maxThrust *= 0.4
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 415
			key = 1 330
			key = 12 0.001
		}
	}
}
@PART[nflv-engine-rd701-1]:HAS[!MODULE[ModuleWaterfallFX]:HAS[#moduleID[rd701FXLH2]]]:NEEDS[NearFutureLaunchVehicles,Waterfall]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleIgnitionEngineController]
	{
		name = ModuleIgnitionEngineController
		@moduleID = chemTechFuelOxidizer
		@engineID = RD701LH2
	}
	+MODULE[ModuleWaterfallFX]:HAS[#moduleID[rd701FX]]
	{
		@moduleID = rd701FXLH2
		@CONTROLLER[throttle]
		{
			@engineID = RD701LH2
		}
		@TEMPLATE
		{
			@templateName = waterfall-hydrolox-upper-1
			@position = 0,0,-0.08
			@scale = 1.22, 1.22, 1.3
		}
	}
}

@PART[nflv-engine-rd704-1]:HAS[!MODULE[MultiModeEngine]]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = RD704
		secondaryEngineID = RD704LH2
	}
}
@PART[nflv-engine-rd704-1]:HAS[!MODULE[ModuleEngines]:HAS[#engineID[RD704LH2]]]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	+MODULE[ModuleEngines*]
	{
		%engineID = RD704LH2
	}
}
@PART[nflv-engine-rd704-1]:NEEDS[NearFutureLaunchVehicles]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[MultiModeEngine]
	{
		%primaryEngineModeDisplayName = #LOC_ChemicalPropulsion_propellant_Kerosene_LqdHydrogen_LqdOxygen_title
		%secondaryEngineModeDisplayName = #LOC_ChemicalPropulsion_propellant_LqdHydrogen_LqdOxygen_title
	}
	@MODULE[ModuleEngines*]:HAS[#engineID[RD704]]
	{
		chemTechFuel = LqdHydrogen
		chemTechAdditive = Kerosene
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 450
			key = 1 245
			key = 12 0.001
		}
	}
	@MODULE[ModuleEngines*]:HAS[#engineID[RD704LH2]]
	{
		chemTechFuel = LqdHydrogen
		chemTechOxidizer = LqdOxygen
		@maxThrust *= 0.4
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 405
			key = 1 355
			key = 12 0.001
		}
	}
}
@PART[nflv-engine-rd704-1]:HAS[!MODULE[ModuleWaterfallFX]:HAS[#moduleID[rd704FXLH2]]]:NEEDS[NearFutureLaunchVehicles,Waterfall]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleIgnitionEngineController]
	{
		name = ModuleIgnitionEngineController
		@moduleID = chemTechFuelOxidizer
		@engineID = RD704LH2
	}
	+MODULE[ModuleWaterfallFX]:HAS[#moduleID[rd704FX]]
	{
		@moduleID = rd704FXLH2
		@CONTROLLER[throttle]
		{
			@engineID = RD704LH2
		}
		@TEMPLATE
		{
			@templateName = waterfall-hydrolox-upper-1
			@position = 0,0,-0.08
			@scale = 1.22, 1.22, 1.3
		}
	}
}

@PART[nflv-rcs-heavy-*,nflv-rcs-aero-heavy-*]:BEFORE[zz_ChemicalPropulsion]
{
	@MODULE[ModuleRCS*]:HAS[@PROPELLANT[MonoPropellant]]
	{
		chemTechPropellant = Hydrazine
		chemTechPropellant = HTP
	}
	@MODULE[ModuleRCS*]:HAS[@PROPELLANT[LiquidFuel],@PROPELLANT[Oxidizer]]
	{
		chemTechFuel = Hydrazine
		chemTechOxidizer = NTO
	}
}

@PART[nflv-fueltank-adapter-5-375-1,nflv-fueltank-adapter-5-375-2,nflv-fueltank-adapter-5-375-3,nflv-fueltank-adapter-75-5-1,nflv-fueltank-adapter-75-5-2]:AFTER[zz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[hollowSwitch]]
	{
		@SUBTYPE[Fuelled]
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIgnitionTankController
					moduleID = chemTechFuelOxidizer
				}
				DATA
				{
					volume = #$../../../../chemTechTankVolumeFuelOxidizer$

				}
			}
		}
		@SUBTYPE[Hollow]
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIgnitionTankController
				}
				DATA
				{
					volume = 0
				}
			}
		}
	}
}
@PART[nflv-skeletal-adapter-5-375-1,nflv-skeletal-adapter-75-5-1]:AFTER[zz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		@SUBTYPE:HAS[#volumeAddedToParent],*
		{
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIgnitionTankController
					moduleID = chemTechFuelOxidizer
				}
				DATA
				{
					volume = #$../../volumeAddedToParent$
					@volume *= 5
					@volume += #$../../../../chemTechTankVolumeFuelOxidizer$
				}
			}
		}
		@SUBTYPE:HAS[~volumeAddedToParent],*
		{
			-volumeAddedToParent = _
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIgnitionTankController
					moduleID = chemTechFuelOxidizer
				}
				DATA
				{
					volume = #$../../../../chemTechTankVolumeFuelOxidizer$
				}
			}
		}
	}
}