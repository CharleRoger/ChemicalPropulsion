B9_TANK_TYPE
{
	name = ChemicalPropulsion_HTP_ElectricCharge
	tankMass = 0.000225
	tankCost = 1.33333333333
	RESOURCE
	{
		name = HTP
		unitsPerVolume = 1
	}
	RESOURCE
	{
		name = ElectricCharge
		unitsPerVolume = 1.5
	}
}

B9_TANK_TYPE
{
	name = ChemicalPropulsion_Hydrazine_ElectricCharge
	tankMass = 0.000225
	tankCost = 1.33333333333
	RESOURCE
	{
		name = Hydrazine
		unitsPerVolume = 1
	}
	RESOURCE
	{
		name = ElectricCharge
		unitsPerVolume = 1.5
	}
}

@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:BEFORE[zz_ChemicalPropulsion]
{
	chemTechTankType = bipropellant
	chemTechTankType = monopropellant
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		-SUBTYPE[LFO] {}
		-SUBTYPE[LF] {}
		-SUBTYPE[Ox] {}
		-SUBTYPE[Support] {}
		-SUBTYPE[LH2OCryo] {}
		-SUBTYPE[LH2Cryo] {}
	}
}

// Bipropellant
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Ethanol],#chemTechOxidizer[LqdOxygen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LFO_Ethanol_LqdOxygen
			title = #LOC_ChemicalPropulsion_propellant_Ethanol_LqdOxygen_title // Ethanol / Oxygen
			tankType = ChemicalPropulsion_propellant_Ethanol_LqdOxygen
			upgradeRequired = chemical-core-partupgrade-Ethanol
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Kerosene],#chemTechOxidizer[LqdOxygen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LFO_Kerosene_LqdOxygen
			title = #LOC_ChemicalPropulsion_propellant_Kerosene_LqdOxygen_title // Kerosene / Oxygen
			tankType = ChemicalPropulsion_propellant_Kerosene_LqdOxygen
			upgradeRequired = chemical-core-partupgrade-Kerosene
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[LqdHydrogen],#chemTechOxidizer[LqdOxygen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2O_LqdHydrogen_LqdOxygen
			title = #LOC_ChemicalPropulsion_propellant_LqdHydrogen_LqdOxygen_title // Hydrogen / Oxygen
			tankType = ChemicalPropulsion_propellant_LqdHydrogen_LqdOxygen
			upgradeRequired = chemical-core-partupgrade-LqdHydrogen
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[LqdMethane],#chemTechOxidizer[LqdOxygen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2O_LqdMethane_LqdOxygen
			title = #LOC_ChemicalPropulsion_propellant_LqdMethane_LqdOxygen_title // Methane / Oxygen
			tankType = ChemicalPropulsion_propellant_LqdMethane_LqdOxygen
			upgradeRequired = chemical-core-partupgrade-LqdMethane
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[LqdAmmonia],#chemTechOxidizer[LqdOxygen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2O_LqdAmmonia_LqdOxygen
			title = #LOC_ChemicalPropulsion_propellant_LqdAmmonia_LqdOxygen_title // Ammonia / Oxygen
			tankType = ChemicalPropulsion_propellant_LqdAmmonia_LqdOxygen
			upgradeRequired = chemical-core-partupgrade-LqdAmmonia
		}
		
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Hydrazine],#chemTechOxidizer[NTO]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LFO_Hydrazine_NTO
			title = #LOC_ChemicalPropulsion_propellant_Hydrazine_NTO_title // Hydrazine / NTO
			tankType = ChemicalPropulsion_propellant_Hydrazine_NTO
			upgradeRequired = chemical-core-partupgrade-NTO
		}
	}
}

// Single propellant
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Ethanol]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LF_Ethanol
			title = #LOC_ChemicalCore_Ethanol_title // Ethanol
			tankType = ChemicalCore_Ethanol
			upgradeRequired = chemical-core-partupgrade-Ethanol
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Kerosene]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LF_Kerosene
			title = #LOC_ChemicalCore_Kerosene_title // Kerosene
			tankType = ChemicalCore_Kerosene
			upgradeRequired = chemical-core-partupgrade-Kerosene
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Aniline]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LF_Aniline
			title = #LOC_ChemicalCore_Aniline_title // Aniline
			tankType = ChemicalCore_Aniline
			upgradeRequired = chemical-core-partupgrade-Aniline
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechPropellant[HTP]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = MP_HTP_ElectricCharge
			titleNFC = #LOC_NFConstruction_switcher_subtype_variant_fuel_Service
			titleHTP = #LOC_ChemicalCore_HTP_title // HTP
			title = #$titleNFC$ ($titleHTP$)
			tankType = ChemicalPropulsion_HTP_ElectricCharge
			upgradeRequired = chemical-core-partupgrade-HTP
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechPropellant[Hydrazine]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = MP_Hydrazine_ElectricCharge
			titleNFC = #LOC_NFConstruction_switcher_subtype_variant_fuel_Service
			titleHydrazine = #LOC_ChemicalCore_Hydrazine_title // Hydrazine
			title = #$titleNFC$ ($titleHydrazine$)
			tankType = ChemicalPropulsion_Hydrazine_ElectricCharge
			upgradeRequired = chemical-core-partupgrade-Hydrazine
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[LqdHydrogen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2_LqdHydrogen
			title = #LOC_ChemicalCore_LqdHydrogen_title // Liquid Hydrogen
			tankType = ChemicalCore_LqdHydrogen
			upgradeRequired = chemical-core-partupgrade-LqdHydrogen
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[LqdMethane]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2_LqdMethane
			title = #LOC_ChemicalCore_LqdMethane_title // Liquid Methane
			tankType = ChemicalCore_LqdMethane
			upgradeRequired = chemical-core-partupgrade-LqdMethane
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[LqdAmmonia]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2_LqdAmmonia
			title = #LOC_ChemicalCore_LqdAmmonia_title // Liquid Ammonia
			tankType = ChemicalCore_LqdAmmonia
			upgradeRequired = chemical-core-partupgrade-LqdAmmonia
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechOxidizer[LqdOxygen]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = Ox_LqdOxygen
			title = #LOC_ChemicalCore_LqdOxygen_title // Liquid Oxygen
			tankType = ChemicalCore_LqdOxygen
			upgradeRequired = chemical-core-partupgrade-LqdOxygen
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechOxidizer[IWFNA]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = Ox_IWFNA
			title = #LOC_ChemicalCore_IWFNA_title // Nitric acid
			tankType = ChemicalCore_IWFNA
			upgradeRequired = chemical-core-partupgrade-IWFNA
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechOxidizer[NTO]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = Ox_NTO
			title = #LOC_ChemicalCore_NTO_title // Dinitrogen Tetroxide
			tankType = ChemicalCore_NTO
			upgradeRequired = chemical-core-partupgrade-NTO
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Pentaborane]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LF_Pentaborane
			title = #LOC_ChemicalCore_Pentaborane_title // Pentaborane
			tankType = ChemicalCore_Pentaborane
			upgradeRequired = chemical-core-partupgrade-Pentaborane
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechFuel[Diborane]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = LH2_Diborane
			title = #LOC_ChemicalCore_Diborane_title // Liquid Diborane
			tankType = ChemicalCore_Diborane
			upgradeRequired = chemical-core-partupgrade-Diborane
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechOxidizer[LqdFluorine]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = Ox_LqdFluorine
			title = #LOC_ChemicalCore_LqdFluorine_title // Liquid Fluorine
			tankType = ChemicalCore_LqdFluorine
			upgradeRequired = chemical-core-partupgrade-LqdFluorine
		}
	}
}
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:HAS[#chemTechOxidizer[N2F4]]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		SUBTYPE
		{
			name = Ox_N2F4
			title = #LOC_ChemicalCore_N2F4_title // Liquid Tetrafluorohydrazine
			tankType = ChemicalCore_N2F4
			upgradeRequired = chemical-core-partupgrade-N2F4
		}
	}
}

// Remove part upgrade restriction on first subtype
@PART[truss-hex-01,truss-hex-02,truss-octo-01,truss-octo-02]:FOR[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		@SUBTYPE,0
		{
			-upgradeRequired = _
		}
	}
}

// Set model transforms for tank subtypes
@PART[truss-hex-01]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		@SUBTYPE[LFO_*],*
		{
			transform = HexLFOTankLong
		}
		@SUBTYPE[LF_*],*
		{
			transform = HexLFTankLong
		}
		@SUBTYPE[Ox_*],*
		{
			transform = HexOXTankLong
		}
		@SUBTYPE[MP_*],*
		{
			transform = HexMPTankLrg
		}
		@SUBTYPE[LH2O_*],*
		{
			transform = HexLH2OTankLrg
			transform = HexLH2OTankLrgFoil
		}
		@SUBTYPE[LH2_*],*
		{
			transform = HexLH2TankLrg
		}
		@SUBTYPE:HAS[#tankType[Chemical*]],*
		{
			transform = LargeTruss
			transform = COLLIDERLRG
		}
	}
}
@PART[truss-hex-02]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		@SUBTYPE[LFO_*],*
		{
			transform = HexLFOTankMed
		}
		@SUBTYPE[LF_*],*
		{
			transform = HexLFTankMed
		}
		@SUBTYPE[Ox_*],*
		{
			transform = HexOXTankMed
		}
		@SUBTYPE[MP_*],*
		{
			transform = HexMPTankMed
		}
		@SUBTYPE[LH2O_*],*
		{
			transform = HexLH2OTankMed
			transform = HexLH2OTankMedFoil
		}
		@SUBTYPE[LH2_*],*
		{
			transform = HexLH2TankMed
		}
		@SUBTYPE:HAS[#tankType[Chemical*]],*
		{
			transform = MediumTruss
			transform = COLLIDERMED
		}
	}
}
@PART[truss-octo-01]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		@SUBTYPE[LFO_*],*
		{
			transform = LFOTankLarge
		}
		@SUBTYPE[LF_*],*
		{
			transform = LFTankLarge
		}
		@SUBTYPE[Ox_*],*
		{
			transform = OXTankLarge
		}
		@SUBTYPE[MP_*],*
		{
			transform = MPTankLarge
		}
		@SUBTYPE[LH2O_*],*
		{
			transform = LH2OXTankLarge
			transform = LH2OXTankLargeFoil
		}
		@SUBTYPE[LH2_*],*
		{
			transform = LH2TankLarge
		}
		@SUBTYPE:HAS[#tankType[Chemical*]],*
		{
			transform = OctoLargeBare
			transform = COLLISION15
		}
	}
}
@PART[truss-octo-02]:AFTER[zzz_ChemicalPropulsion]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]
	{
		@SUBTYPE[LFO_*],*
		{
			transform = LFOTankMed
		}
		@SUBTYPE[LF_*],*
		{
			transform = LFTankMed
		}
		@SUBTYPE[Ox_*],*
		{
			transform = OXTankMed
		}
		@SUBTYPE[MP_*],*
		{
			transform = MPTankMed
		}
		@SUBTYPE[LH2O_*],*
		{
			transform = LH2OXTankMed
			transform = LH2OXTankMedFoil
		}
		@SUBTYPE[LH2_*],*
		{
			transform = LH2TankMed
		}
		@SUBTYPE:HAS[#tankType[Chemical*]],*
		{
			transform = OctoMedBare
			transform = COLLISION14
		}
	}
}