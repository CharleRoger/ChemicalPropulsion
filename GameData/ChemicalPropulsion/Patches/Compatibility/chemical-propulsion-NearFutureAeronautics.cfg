@PART[nfa-atomic-multimode-25-1]:NEEDS[NearFutureAeronautics]:BEFORE[zz_ChemicalPropulsion]
{
	chemTechMultiModeEngineSupported = true
	
	@MODULE[ModuleEnginesFX]:HAS[#engineID[ClosedCycle]]
	{
		chemTechPropellant = LqdHydrogen
	}
}

@PART[nfa-multimodal-125-1]:NEEDS[NearFutureAeronautics]:BEFORE[zz_ChemicalPropulsion]
{
	chemTechMultiModeEngineSupported = true
	
	@MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]
	{
		chemTechFuel = LqdHydrogen
	}
	@MODULE[ModuleEnginesFX]:HAS[#engineID[ClosedCycle]]
	{
		chemTechFuel = LqdHydrogen
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 420
			key = 1 370
			key = 5 250
			key = 10 200
			key = 20 0.001
		}
	}
}

@PART[nfa-multimodal-25-1]:NEEDS[NearFutureAeronautics]:BEFORE[zz_ChemicalPropulsion]
{
	chemTechMultiModeEngineSupported = true
	
	@MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]
	{
		chemTechFuel = LqdHydrogen
	}
	@MODULE[ModuleEnginesFX]:HAS[#engineID[ClosedCycle]]
	{
		chemTechFuel = LqdHydrogen
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 440
			key = 1 380
			key = 5 310
			key = 10 150
			key = 20 0.001
		}
	}
}

@PART[nfa-multimodal-25-2]:NEEDS[NearFutureAeronautics]:BEFORE[zz_ChemicalPropulsion]
{
	chemTechMultiModeEngineSupported = true
	
	@MODULE[ModuleEnginesFX]:HAS[#engineID[AirBreathing]]
	{
		chemTechFuel = LqdHydrogen
	}
	@MODULE[ModuleEnginesFX]:HAS[#engineID[ClosedCycle]]
	{
		chemTechFuel = LqdHydrogen
		chemTechOxidizer = LqdOxygen
		-atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 460
			key = 1 240
			key = 5 150
			key = 10 80
			key = 20 0.001
		}
	}
}

@PART[nfa-fueltank-25-*]:BEFORE[zz_ChemicalPropulsion]
{
	chemTechTankType = aviation
}	
@PART[nfa-fueltank-25-*]:FOR[zz_ChemicalPropulsion]
{
	%chemTechTankVolumeFuelOxidizer = #$MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]/baseVolume$
	@chemTechTankVolumeFuelOxidizer *= 5
	%chemTechTankMassFuelOxidizer = #$chemTechTankVolumeFuelOxidizer$
	@chemTechTankMassFuelOxidizer *= -0.000125

	-MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]] {}
}